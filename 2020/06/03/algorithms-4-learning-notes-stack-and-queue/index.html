<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="Bink Wang">


    <meta name="subtitle" content="受人以渔，还人以渔">


    <meta name="description" content="一个根本不正经的技术博客">


    <meta name="keywords" content="Python,PHP,Linux,CentOS,Ubuntu,Blockchain,Bitcoin,ETH,NAS">


<title>《算法4》学习笔记（栈和队列） | Bink&#39;s Blog</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    




<meta name="generator" content="Hexo 4.2.1"></head>
<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Bink&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>

        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Bink&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
        <div class="main">
            <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="collapse_toc()">Collapse all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 6,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "Collapse all"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "Expand all"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">《算法4》学习笔记（栈和队列）</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">Bink Wang</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">June 3, 2020&nbsp;&nbsp;15:29:32</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/Algorithms/">Algorithms</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p>在本书开始会讲解<code>Java</code>语言的特性（因为本书的算法代码示例是基于Java代码呈现的），以及数据抽象，背包、栈、队列 等基础知识，一切都为了后面真正展开算法讲解做好基础。</p>
<p>本次重新开始看<code>《算法4》</code>，Java编程基础部分和数据抽象部分基本上一目十行草草看过，毕竟老码农了（自恋）；本来打算连<code>背包、栈、队列</code> 部分也粗略跳过，但是突发奇想要不然我用其他语言实现一次？</p>
<p><em>注：关于什么是<code>背包、栈、队列</code>请自行了解，这里不再介绍。</em></p>
<h3 id="PHP代码实现"><a href="#PHP代码实现" class="headerlink" title="PHP代码实现"></a>PHP代码实现</h3><h4 id="造轮子"><a href="#造轮子" class="headerlink" title="造轮子"></a>造轮子</h4><p>程序员的本职就是<code>重复造轮子</code>，所以第一件事就是找找有没有其他人做过类似的实现，一番搜索查找下来目前网上关于<code>PHP实现栈和队列</code>的方式大致分为三类：</p>
<ul>
<li>利用PHP数组函数 <code>array_push()</code>、<code>array_pop()</code>、<code>array_shift()</code> 等实现。</li>
<li>利用PHP内置函数 <a href="https://www.php.net/manual/zh/splqueue.dequeue.php" target="_blank" rel="noopener">SplQueue</a>实现。</li>
<li>通过自建节点用链表结构的方式实现。</li>
</ul>
<p>前两种对我来说暂时没有意义，所以我选择看第三种实现方式，找到了这篇博文<a href="https://juejin.im/post/5af3b53e6fb9a07aca7a2cc5" target="_blank" rel="noopener">《php实现基本数据结构之栈、队列》</a>，思路不错，但是代码存在Bug，尤其是队列的实现这里完全跑不通 <em>（已经有人在评论里反馈了，然而一年过去了作者没有任何答复）</em>，刚好我来修缮Bug以及补全队列实现部分，算是一个小练手。</p>
<h4 id="单向链表和节点"><a href="#单向链表和节点" class="headerlink" title="单向链表和节点"></a>单向链表和节点</h4><p>由于实现<code>栈</code>和<code>队列</code>的方式采用<code>单向链表</code>的方式实现，因此先定义一个<code>节点</code>类。</p>
<p>原文中的实现如下：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> $Data;</span><br><span class="line">    <span class="keyword">private</span> $Next;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">($data, $next)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;Data = $data;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;Next = $next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__set</span><span class="params">($name, $value)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="keyword">$this</span>-&gt;$name))&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;$name = $value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__get</span><span class="params">($name)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="keyword">$this</span>-&gt;$name))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;$name;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">FALSE</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是这个类存在一些弊端：</p>
<ol>
<li>采用 <code>__get()</code>、<code>__set()</code> 这样的写法看起来很酷，然而并没有什么必要，反之如果<code>$name</code>错误甚至连个报错都没有，譬如我手误将 <code>$node-&gt;Next = $newNode;</code> 写成 <code>$node-&gt;next = $newNode;</code>，则什么都不会发生，也不会报错。</li>
<li>在 <code>__get()</code> 中使用 <code>isset($this-&gt;$name)</code> 这个判断给后面<code>队列</code>的实现挖了一个巨坑，因为某些<code>Node</code>在实例化的时候<code>$next</code>参数为<code>NULL</code>，从而导致私有类变量<code>$this-&gt;Next</code>的值为<code>NULL</code>，因此<code>isset($this-&gt;$name)</code>将永远为<code>FALSE</code>，无法设置其值。详见：<a href="https://www.php.net/manual/zh/function.isset.php" target="_blank" rel="noopener">isset()</a></li>
</ol>
<p>所以，我简化了这个类：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> $Data;</span><br><span class="line">    <span class="keyword">public</span> $Next;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">($data, $next = FALSE)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;Data = $data;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;Next = $next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="栈"><a href="#栈" class="headerlink" title="栈"></a>栈</h4><p>这里直接贴原文代码，我再解读：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stack</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> $top = <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">isEmpty</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;top === <span class="keyword">NULL</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">TRUE</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">FALSE</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">push</span><span class="params">($data)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;top = <span class="keyword">new</span> Node($data, <span class="keyword">$this</span>-&gt;isEmpty() ? <span class="keyword">NULL</span> : <span class="keyword">$this</span>-&gt;top);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">pop</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;isEmpty())</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">NULL</span>;</span><br><span class="line">        $node = <span class="keyword">$this</span>-&gt;top-&gt;Next;</span><br><span class="line">        $data = <span class="keyword">$this</span>-&gt;top-&gt;Data;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;top = $node;</span><br><span class="line">        <span class="keyword">return</span> $data;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>Push</code> 时，如果当前<code>栈</code>为空，那么实例化一个没有<code>next</code>的<code>节点</code>；否则实例化一个新<code>节点</code>，并且该<code>节点</code>的<code>下一个节点</code>指向当前完整<code>链</code>。</li>
<li><code>Pop</code> 时，如果当前<code>栈</code>为空，直接返回<code>NULL</code>；否则取出当前<code>头节点</code>的<code>数据</code>，并且将<code>当前链</code>设置为<code>头节点</code>的<code>下一个节点</code>，返回取出的<code>数据</code>。</li>
</ul>
<p>这里注意：栈实现中唯一一个设置节点<code>next</code>的地方是在<code>节点</code>实例化的时候进行的，而不是通过<code>$this-&gt;top-&gt;Next = xxx;</code> 的方式设置，因此就避开了我之前提到的<code>Node</code>类中<code>isset</code>函数的那个问题。</p>
<h4 id="队列"><a href="#队列" class="headerlink" title="队列"></a>队列</h4><p>还是先贴原文代码，我再解读：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Queue</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> $front = <span class="keyword">NULL</span>;<span class="comment">//队头</span></span><br><span class="line">    <span class="keyword">private</span> $rear = <span class="keyword">NULL</span>;<span class="comment">//队尾</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">isEmpty</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;front === <span class="keyword">NULL</span> || <span class="keyword">$this</span>-&gt;rear === <span class="keyword">NULL</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">TRUE</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">FALSE</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 入队</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $data</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">enQueue</span><span class="params">($data)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;isEmpty())</span><br><span class="line">            <span class="keyword">$this</span>-&gt;front = <span class="keyword">$this</span>-&gt;rear = <span class="keyword">new</span> Node($data, <span class="keyword">NULL</span>);</span><br><span class="line">        <span class="keyword">$this</span>-&gt;rear-&gt;Next = <span class="keyword">new</span> Node($data, <span class="keyword">NULL</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 出队</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> null</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">deQueue</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;isEmpty())</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">NULL</span>;</span><br><span class="line">        $node = <span class="keyword">$this</span>-&gt;front-&gt;Next;</span><br><span class="line">        $data = <span class="keyword">$this</span>-&gt;front-&gt;Data;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;front == <span class="keyword">$this</span>-&gt;rear)<span class="comment">//当队头跟队尾相同时</span></span><br><span class="line">            <span class="keyword">$this</span>-&gt;rear = $node;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;front = $node;</span><br><span class="line">        <span class="keyword">return</span> $data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>enQueue</code> 函数是有问题的，重复调用的话，最终结果是<code>$this-&gt;front</code>和<code>$this-&gt;rear</code>为同一个<code>链</code>，链中永远只有2个<code>节点</code>，即第一个和最后一个数据的<code>节点</code>。</p>
<p>如果我们<code>Node</code>类用原文中那个实现的话，<code>链</code>中更是只有一个节点，因为<code>$this-&gt;rear-&gt;Next = new Node($data, NULL);</code>这段代码什么都不会发生（详见<code>单向链表和节点</code>部分）。</p>
<p><strong>所以基本上可以确认原文博主没有进行过代码测试就发文了，强烈谴责一下，这也是为什么我特别不喜欢看国人写的博文的原因，一万个坑等着你去踩。要不是这些天我的穿云梯被人拆了还没来得急修，我才不会用中文搜索引擎。</strong></p>
<hr>
<p>那么，该如何通过<code>链表</code>实现一个<code>队列</code>呢？PHP内置函数 <a href="https://www.php.net/manual/zh/splqueue.dequeue.php" target="_blank" rel="noopener">SplQueue</a>描述说是通过<code>双向链表</code>进行实现的，具体源码我没有去看，我还是希望可以通过<code>单向链表</code>的方式来进行实现。</p>
<p>最终实现如下：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Queue</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> $queue = <span class="keyword">FALSE</span>;</span><br><span class="line">    <span class="keyword">private</span> $endNode = <span class="keyword">FALSE</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">isEmpty</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;queue === <span class="keyword">FALSE</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">TRUE</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">FALSE</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">enQueue</span><span class="params">($data)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;isEmpty())&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;queue = <span class="keyword">new</span> Node($data, <span class="keyword">FALSE</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        $newNode = <span class="keyword">new</span> Node($data, <span class="keyword">FALSE</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;queue-&gt;Next === <span class="keyword">FALSE</span>)&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;queue-&gt;Next = $newNode;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;endNode-&gt;Next = $newNode;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">$this</span>-&gt;endNode = $newNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">deQueue</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;isEmpty())&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">FALSE</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        $node = <span class="keyword">$this</span>-&gt;queue-&gt;Next;</span><br><span class="line">        $data = <span class="keyword">$this</span>-&gt;queue-&gt;Data;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">$this</span>-&gt;queue = $node;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">$this</span>-&gt;queue === <span class="keyword">FALSE</span>)&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;endNode = <span class="keyword">FALSE</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> $data;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其中 <code>queue</code> 为完整的<code>单向链表</code>，保存完整的<code>队列</code>数据；而 <code>endNode</code> 总是指向<code>链表</code>尾部，用以追加新入队的数据到链尾。</p>
<p><code>enQueue</code>和<code>deQueue</code>函数实现就不多解释了，一目了然。</p>
<h5 id="另一个错误的队列实现"><a href="#另一个错误的队列实现" class="headerlink" title="另一个错误的队列实现"></a>另一个错误的队列实现</h5><p>与此同时发现了另外一个博主使用<code>链表</code>实现<code>队列</code>的文章：<a href="https://www.cnblogs.com/sunshineliulu/p/7740102.html" target="_blank" rel="noopener">数据结构与算法之PHP实现队列、栈</a></p>
<p>代码如下：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * php用链表实现队列:先进先出FIFO</span></span><br><span class="line"><span class="comment">    1. isEmpty(): 判断队列是否为空</span></span><br><span class="line"><span class="comment">    2. enqueue(): 入队，在队尾加入数据。</span></span><br><span class="line"><span class="comment">    3. dequeue(): 出队，返回并移除队首数据。队空不可出队。</span></span><br><span class="line"><span class="comment">    4. clear(): 清空队列</span></span><br><span class="line"><span class="comment">    5. show(): 显示队列中的元素</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 节点类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> $data;   <span class="comment">// 节点数据</span></span><br><span class="line">    <span class="keyword">public</span> $next;   <span class="comment">// 下一节点</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">($data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;data = $data;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;next = <span class="keyword">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 队列类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Queue</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> $header;        <span class="comment">// 头节点</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">($data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;header = <span class="keyword">new</span> Node($data);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 判断队列是否为空</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;header-&gt;next !== <span class="keyword">null</span>) &#123; <span class="comment">// 不为空</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 入队，在队尾加入数据。</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">enqueue</span><span class="params">($element)</span> </span>&#123;</span><br><span class="line">        $newNode = <span class="keyword">new</span> Node($element);</span><br><span class="line">        $current = <span class="keyword">$this</span>-&gt;header;</span><br><span class="line">        <span class="keyword">if</span> ($current-&gt;next == <span class="keyword">null</span>) &#123; <span class="comment">// 只有头节点</span></span><br><span class="line">            <span class="keyword">$this</span>-&gt;header-&gt;next = $newNode;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// 遍历到队尾最后一个元素</span></span><br><span class="line">            <span class="keyword">while</span> ($current-&gt;next != <span class="keyword">null</span>) &#123;</span><br><span class="line">                $current = $current-&gt;next;</span><br><span class="line">            &#125;</span><br><span class="line">            $current-&gt;next = $newNode;</span><br><span class="line">        &#125;</span><br><span class="line">        $newNode-&gt;next = <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 出队，返回并移除队首数据。队空不可出队。</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">dequeue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;isEmpty()) &#123; <span class="comment">// 队列为空</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// header头节点没有实际意义，队首节点是header指向的结点。</span></span><br><span class="line">        $current = <span class="keyword">$this</span>-&gt;header;</span><br><span class="line">        $current-&gt;next = $current-&gt;next-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 清空队列</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">clear</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;header = <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 显示队列中的元素</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        $current = <span class="keyword">$this</span>-&gt;header;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">"空！"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> ($current-&gt;next != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">echo</span> $current-&gt;next-&gt;data . PHP_EOL;</span><br><span class="line">            $current = $current-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line">$q = <span class="keyword">new</span> Queue(<span class="string">'header'</span>);</span><br><span class="line">$q-&gt;enqueue(<span class="string">'a'</span>);</span><br><span class="line">$q-&gt;enqueue(<span class="string">'b'</span>);</span><br><span class="line">$q-&gt;enqueue(<span class="string">'c'</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"队列为："</span>;</span><br><span class="line">$q-&gt;show();</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;/br&gt;"</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"a出队，队列为："</span>;</span><br><span class="line">$q-&gt;dequeue();</span><br><span class="line">$q-&gt;show();</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;/br&gt;"</span>;</span><br><span class="line">$q-&gt;clear();</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"清空队列后，队列为"</span>;</span><br><span class="line">$q-&gt;show();</span><br></pre></td></tr></table></figure>

<p>简直就给我人看傻了，<code>enqueue</code>函数中，当链中有数据时用 <code>while</code> 遍历整个链到最后一个<code>节点</code>（即链尾）…… 简直无力吐槽。</p>
<p>之所以用链表实现队列，就是因为链表的特性：数据大小和操作复杂度无关；他这个实现等于说队列中的数据越多，每次入队时的复杂度和数据长度成正比。</p>
<h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><p>栈、队列、背包<code>（本文没有提及，但是更容易实现）</code>只是作为后面的算法代码的基础构成，本身是很基础的东西，其实发这篇博文的关键原因只有一个：</p>
<blockquote>
<p>再次奉劝，想学习前沿知识尽可能不要看国人的文章和博客，也尽可能不要用中文搜索引擎，会踩无穷无尽的坑；虽然不能一棒子打死，但是我真的是在中文博客和文章上踩了几千次坑了，引以为戒吧。</p>
</blockquote>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>Bink Wang</span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="https://binkcn.com/2020/06/03/algorithms-4-learning-notes-stack-and-queue/">https://binkcn.com/2020/06/03/algorithms-4-learning-notes-stack-and-queue/</a></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>Copyright (c) 2020 <a href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/Algorithms/"># Algorithms</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
            
            <a class="next" rel="next" href="/2020/06/03/algorithms-4-learning-notes-preface/">《算法4》学习笔记（序）</a>
            
        </section>


    </article>
</div>

        </div>
        <footer id="footer" class="footer">
    <div class="copyright">
        <span>© Bink Wang | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>
</html>
